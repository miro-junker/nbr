<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSocket Test</title>
</head>
<body>
  <h1>WebSocket Test Sender</h1>
  <button id="sendBtn">Send Message</button>
  <pre id="log"></pre>

  <script>
    const logEl = document.getElementById("log");
    const ws = new WebSocket("ws://nobrakes.cz:81?role=sensor");

    function log(message) {
      logEl.textContent += message + "\n";
    }

    ws.onopen = () => {
      log("‚úÖ Connected to ws://nobrakes.cz:81");
    };

    ws.onmessage = (event) => {
      log("üì© Message from server: " + event.data);
    };

    ws.onclose = () => {
      log("‚ùå Connection closed");
    };

    ws.onerror = (err) => {
      log("‚ö†Ô∏è WebSocket error: " + err);
    };

    document.getElementById("sendBtn").addEventListener("click", () => {
      if (ws.readyState === WebSocket.OPEN) {
        const message = "Hello from browser client!";
        ws.send(message);
        log("‚û°Ô∏è Sent: " + message);
      } else {
        log("‚ö†Ô∏è WebSocket not open");
      }
    });
  </script>
</body>
</html>
